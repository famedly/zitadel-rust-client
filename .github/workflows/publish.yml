# SPDX-FileCopyrightText: 2025 Famedly GmbH (info@famedly.com)
#
# SPDX-License-Identifier: Apache-2.0

name: "Publish"

on:
  push:
    tags:
      # For root tags, such as v0.4.2
      - "v[0-9]+.[0-9]+.[0-9]+"
      - "v[0-9]+.[0-9]+.[0-9]+-rc.[0-9]+"

jobs:
  publish:
    needs: rust
    uses: famedly/backend-build-workflows/.github/workflows/publish-crate.yml@v2
    with:
      registry-name: "crates-io"
      registry-index: "https://github.com/rust-lang/crates.io-index"
    secrets:
      CI_SSH_PRIVATE_KEY: ${{ secrets.CI_SSH_PRIVATE_KEY }}
      registry-auth-token: ${{ secrets.CRATES_IO_TOKEN }}
